{"debug_id":"83912de7-5e60-568d-9bd8-26b3f9859489","file":"TrackAdd.js","mappings":";AAAA,OAAO,EACH,KAAK,EAGL,MAAM,EAIN,eAAe,EACf,eAAe,EAClB,MAAM,sBAAsB,CAAC;AAE9B,MAAM,OAAO,QAAS,SAAQ,KAAK;IAC/B,YAAY,MAAiB,EAAE,SAAoB;QAC/C,KAAK,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,YAA0B,EAAE,IAAqE;QAC3G,MAAM,IAAI,GAAG,IAAI,YAAY,eAAe,IAAI,IAAI,YAAY,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;QAEnI,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE;gBACH,OAAO,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;aACjC;YACD,MAAM,EAAE;gBACJ,MAAM,EAAE;oBACJ,UAAU,EAAE;wBACR,IAAI;qBACP;iBACJ;aACJ;YACD,MAAM,EAAE;gBACJ,OAAO,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;gBAC9B,OAAO,EAAE,YAAY,CAAC,YAAY,CAAC,EAAE;gBACrC,MAAM,EAAE,YAAY,CAAC,WAAW,CAAC,EAAE;gBACnC,MAAM,EAAE;oBACJ,UAAU,EAAE;wBACR,IAAI;qBACP;iBACJ;aACJ;SACJ,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CACnB,SAAS,IAAI,YAAY,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,kBAAkB,YAAY,CAAC,KAAK,CAAC,IAAI,KAAK,YAAY,CAAC,KAAK,CAAC,EAAE,GAAG,EACtH,YAAY,CACf,CAAC;IACN,CAAC;CACJ","names":[],"sourceRoot":"/","sources":["src/events/music/track/TrackAdd.ts"],"sourcesContent":["import {\n    Event,\n    KATClient,\n    Commander,\n    Events,\n    Subscription,\n    YouTubeTrack,\n    SpotifyTrack,\n    YouTubePlaylist,\n    SpotifyPlaylist\n} from '@structures/index.js';\n\nexport class TrackAdd extends Event {\n    constructor(client: KATClient, commander: Commander) {\n        super(client, commander, Events.TrackAdd);\n    }\n\n    async execute(subscription: Subscription, item: YouTubeTrack | SpotifyTrack | YouTubePlaylist | SpotifyPlaylist) {\n        const data = item instanceof YouTubePlaylist || item instanceof SpotifyPlaylist ? item.tracks.map((track) => track.raw) : item.raw;\n\n        await this.client.prisma.queue.upsert({\n            where: {\n                guildId: subscription.guild.id,\n            },\n            update: {\n                tracks: {\n                    createMany: {\n                        data,\n                    },\n                },\n            },\n            create: {\n                guildId: subscription.guild.id,\n                voiceId: subscription.voiceChannel.id,\n                textId: subscription.textChannel.id,\n                tracks: {\n                    createMany: {\n                        data,\n                    },\n                },\n            },\n        });\n\n        this.client.logger.info(\n            `Added ${data instanceof Array ? data.length : 1} Track(s) For: ${subscription.guild.name} (${subscription.guild.id})`,\n            'Dispatcher'\n        );\n    }\n}\n"],"version":3}